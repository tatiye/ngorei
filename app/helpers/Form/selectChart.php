<?php 
error_reporting(0);  
use app\tatiye;
$df1='';
$df2='';
$df3='';
$ticks='';
$Text=tatiye::Text();
$db=new tatiye();
$variable=json_decode($_POST['chartMonth'], true);
$no=0;
foreach ($variable as $key => $value) {
     $x=0;
     $ticks=$ticks."[".$value['month'].",'".$value['en'].' '.$value['format']."'],";
    while($x <= 4) {
       $perkali=($value['month']+$x);
       $setData=ceil($value['data']/$x/10);
       $arrsetData[$perkali]=ceil($value['data']/$x/10);

       $digit=strlen($setData);
       if ($digit==1) {
           $Hasl=$setData+ $perkali;
        } elseif ($digit ==3){
           $Hasl=ceil($setData/10) ;
       } else {
        $Hasl=$setData;
       }

      if ($value['data'] >= 10) {
       $myHasil=$Hasl;
      } else {
       $myHasil=0;
      }
      if ($myHasil==INF) {
         $myHasilX=$arrsetData[1]??=10;
      } else {
         $myHasilX=$myHasil;
      }
      $df1=$df1.'['.$perkali.','.($myHasilX+15).'],';
      $df2=$df2.'['.$perkali.','.($myHasilX+4).'],';
      $df3=$df3.'['.$perkali.','.$myHasilX.'],';
        $x++;
    }
 }
$df1X= substr($df1, 0, -1);
$df2X= substr($df2, 0, -1);
$df3X= substr($df3, 0, -1);
?>
<script type="text/javascript">
  <?php
 if($_POST['segments']  == 'flotChar') {?>
   $(function(){
        'use strict'
        $.plot('#<?=$_POST['canvasID'];?>', [{
          data: df1x,
          color: '#65e0e0'
        },{
          data: df2x,
          color: '#69b2f8'
        },{
          data: df3x,
          color: '#0168fa',
          lines: {
            show: true,
            lineWidth: 1.5
          },
          bars: { show: false }
        }], {
          series: {
            shadowSize: 0,
            bars: {
              show: true,
              lineWidth: 0,
              barWidth: 0.5,
              fill: 1
            }
          },
          grid: {
            color: '#c0ccda',
            borderWidth: 0,
            labelMargin: 10
          },
          yaxis: {
            show: true,
            max: 110,
            tickSize: 15
          },
          xaxis: {
            color: 'transparent',
            show: true,
            max:57,
            ticks: [<?=$ticks;?>]
          }
        });

      })


<?php } elseif ($_POST['segments'] == 'Actual'){?>
   var plot = $.plot(
          "#<?=$_POST['canvasID'];?>",
          [
            {
              data: df3x,
              color: "#69b2f8",
            },
            {
              data: df1x,
              color: "#d1e6fa",
            },
            {
              data: df2x,
              color: "#d1e6fa",
              lines: {
                fill: false,
                lineWidth: 1.5,
              },
            },
          ],
          {
            series: {
              stack: 0,
              shadowSize: 0,
              lines: {
                show: true,
                lineWidth: 0,
                fill: 1,
              },
            },
            grid: {
              borderWidth: 0,
              aboveData: true,
            },
            yaxis: {
              show: false,
              min: 0,
              max: 350,
            },
            xaxis: {
              show: true,
              ticks: [
                [0, ""],
                [8, "Jan"],
                [20, "Feb"],
                [32, "Mar"],
                [44, "Apr"],
                [56, "May"],
                [68, "Jun"],
                [80, "Jul"],
                [92, "Aug"],
                [104, "Sep"],
                [116, "Oct"],
                [128, "Nov"],
                [140, "Dec"],
              ],
              color: "rgba(255,255,255,.2)",
            },
          }
        );





<?php } elseif ($_POST['segments'] == 'chartMonth'){?>
 $.plot('#<?=$_POST['canvasID'];?>', [{
            data: df3x,
            color: '#e1e5ed',
            lines: {
              lineWidth: 1
            }
          },{
            data: df3x,
            color: '#69b2f8',
            lines: {
              lineWidth: 1
            }
          },{
            data: df3x,
            color: '#0168fa'
          }], {
                series: {
            stack: 0,
                    shadowSize: 0,
            lines: {
              show: true,
              lineWidth: 1.7,
              fill: true,
              fillColor: { colors: [ { opacity: 0 }, { opacity: 0.2 } ] }
            }
                },
          grid: {
            borderWidth: 0,
            labelMargin: 5,
            hoverable: true
          },
                yaxis: {
            show: true,
            color: 'rgba(72, 94, 144, .1)',
            min: 0,
            max: 260,
            font: {
              size: 10,
              color: '#8392a5'
            }
          },
                xaxis: {
            show: true,
            color: 'rgba(72, 94, 144, .1)',
            ticks:false,
            font: {
              size: 10,
              family: 'Arial, sans-serif',
              color: '#8392a5'
            },
            reserveSpace: false
          }
            });


<?php }?>

'use strict'
var df1x = [
  [0,10.42460652446133],
   <?=$df1X;?>
];

var df2x = [
  [0,10.42460652446133],
 <?=$df2X;?>
];

var df3x = [
  [0,0.42460652446133],
 <?=$df3X;?>
];


var df4 = [
  [0,0],
  [1,0],
  [2,0],
  [3,0],
  [4,0],
  [5,0],
  [6,0],
  [7,0],
  [8,0],
  [9,0],
  [10,0],
  [11,0],
  [12,0],
  [13,0],
  [14,0],
  [15,0],
  [16,0],
  [17,0],
  [18,0],
  [19,0],
  [20,0],
  [21,0],
  [22,0],
  [23,0],
  [24,0],
  [25,0],
  [26,0],
  [27,0],
  [28,0],
  [29,0],
  [30,0],
  [31,0],
  [32,0],
  [33,0],
  [34,0],
  [35,0],
  [36,0],
  [37,0],
  [38,0],
  [39,0],
  [40,10],
  [41,0],
  [42,0],
  [43,0],
  [44,45],
  [45,0],
  [46,0],
  [47,37],
  [48,0],
  [49,39],
  [50,0],
  [51,0],
  [52,0],
  [53,5],
  [54,0],
  [55,31],
  [56,0],
  [57,43],
  [58,0],
  [59,0],
  [60,30],
  [61,0],
  [62,0],
  [63,0],
  [64,0],
  [65,0],
  [66,0],
  [67,0],
  [68,0],
  [69,0]
];

var df5 = [
  [0,0],
  [1,0],
  [2,0],
  [3,0],
  [4,0],
  [5,0],
  [6,0],
  [7,0],
  [8,0],
  [9,0],
  [10,0],
  [11,40],
  [12,0],
  [13,5],
  [14,0],
  [15,0],
  [16,0],
  [17,0],
  [18,0],
  [19,0],
  [20,0],
  [21,0],
  [22,0],
  [23,0],
  [24,0],
  [25,0],
  [26,0],
  [27,0],
  [28,0],
  [29,0],
  [30,0],
  [31,0],
  [32,0],
  [33,0],
  [34,0],
  [35,0],
  [36,0],
  [37,0],
  [38,0],
  [39,0],
  [40,45],
  [41,1],
  [42,0],
  [43,0],
  [44,35],
  [45,0],
  [46,0],
  [47,40],
  [48,0],
  [49,0],
  [50,45],
  [51,0],
  [52,0],
  [53,0],
  [54,5],
  [55,0],
  [56,0],
  [57,20],
  [58,0],
  [59,5],
  [60,0],
  [61,0],
  [62,0],
  [63,0],
  [64,0],
  [65,0],
  [66,0],
  [67,0],
  [68,0],
  [69,0]
];

var df6 = [
  [0,0],
  [1,0],
  [2,0],
  [3,0],
  [4,0],
  [5,0],
  [6,0],
  [7,0],
  [8,0],
  [9,0],
  [10,0],
  [11,0],
  [12,0],
  [13,0],
  [14,0],
  [15,0],
  [16,0],
  [17,0],
  [18,0],
  [19,0],
  [20,0],
  [21,0],
  [22,0],
  [23,0],
  [24,0],
  [25,40],
  [26,0],
  [27,0],
  [28,10],
  [29,0],
  [30,0],
  [31,0],
  [32,0],
  [33,0],
  [34,0],
  [35,0],
  [36,0],
  [37,0],
  [38,0],
  [39,0],
  [40,50],
  [41,0],
  [42,40],
  [43,0],
  [44,5],
  [45,0],
  [46,0],
  [47,10],
  [48,0],
  [49,0],
  [50,25],
  [51,0],
  [52,0],
  [53,0],
  [54,5],
  [55,0],
  [56,0],
  [57,0],
  [58,0],
  [59,25],
  [60,0],
  [61,0],
  [62,0],
  [63,0],
  [64,40],
  [65,0],
  [66,0],
  [67,0],
  [68,0],
  [69,0]
];

var df7 = [
  [0,49.331065063219285],
  [1,48.79814898366035],
  [2,50.61793547911337],
  [3,53.31696317779434],
  [4,54.78560952831719],
  [5,53.84293992505776],
  [6,54.682958355082874],
  [7,56.742547193381654],
  [8,56.99677491680908],
  [9,56.144488388681445],
  [10,56.567122269843885],
  [11,60.355022877262684],
  [12,58.7457726121753],
  [13,61.445407102315514],
  [14,61.112870581452086],
  [15,58.57202276349258],
  [16,54.72497594269612],
  [17,52.070341498681124],
  [18,51.09867716530438],
  [19,47.48185519192089],
  [20,48.57861168097493],
  [21,48.99789250679436],
  [22,53.582491800119456],
  [23,50.28407438696142],
  [24,46.24606628705599],
  [25,48.614330310543856],
  [26,51.75313497797672],
  [27,51.34463925296746],
  [28,50.217320673443936],
  [29,54.657281647073304],
  [30,52.445057217757245],
  [31,53.063914668561345],
  [32,57.07494250387825],
  [33,52.970403392565515],
  [34,48.723854145068756],
  [35,52.69064629353968],
  [36,53.590890118378205],
  [37,58.52332126105745],
  [38,55.1037709679581],
  [39,58.05347017020425],
  [40,61.350810521199946],
  [41,57.746188675088575],
  [42,60.276910973029786],
  [43,61.00841651851749],
  [44,57.786733623457636],
  [45,56.805721677811356],
  [46,58.90301959619822],
  [47,62.45091969566289],
  [48,58.75007922945926],
  [49,58.405842466185355],
  [50,56.746633122658444],
  [51,52.76631598845634],
  [52,52.3020769891715],
  [53,50.56370473325533],
  [54,55.407205992344544],
  [55,50.49825590435839],
  [56,52.4975614755482],
  [57,48.79614749316488],
  [58,47.46776704767111],
  [59,43.317880548036456],
  [60,38.96296121124144],
  [61,34.73218432559628],
  [62,31.033700732272116],
  [63,32.637987000382296],
  [64,36.89513637594264],
  [65,35.89701755609185],
  [66,32.742284578187544],
  [67,33.20516407297906],
  [68,30.82094321791933],
  [69,28.64770271525896],
  [70,28.44679026902145],
  [71,27.737654438195236],
  [72,27.755190738237744],
  [73,25.96228929938593],
  [74,24.38197394166947],
  [75,21.95038772723346],
  [76,22.08944448751686],
  [77,23.54611335622507],
  [78,27.309610481106425],
  [79,30.276849322378055],
  [80,27.25409223418214],
  [81,29.920374921780102],
  [82,25.143447932376702],
  [83,23.09444253479626],
  [84,23.79459089729409],
  [85,23.46775072519832],
  [86,27.9908486073969],
  [87,23.218855925354447],
  [88,23.9163141686872],
  [89,19.217667423877607],
  [90,15.135179958932145],
  [91,15.08666008920407],
  [92,11.006269617032526],
  [93,9.201671310476282],
  [94,7.475865090236113],
  [95,11.645754524211824],
  [96,15.76161040821357],
  [97,13.995208323029495],
  [98,12.59338056489445],
  [99,13.536707176236195],
  [100,15.01308268888571],
  [101,13.957161242832626],
  [102,13.237091619700053],
  [103,18.10178875669874],
  [104,20.634765519499563],
  [105,21.064946755449817],
  [106,25.370593801826132],
  [107,25.321453557866203],
  [108,20.947464543531186],
  [109,18.750516645477425],
  [110,15.382042945356737],
  [111,14.569147793065632],
  [112,17.949159188821604],
  [113,15.965876707018058],
  [114,16.359355082317443],
  [115,14.163139419453657],
  [116,12.106761506858124],
  [117,14.843319717588216],
  [118,17.24291158460492],
  [119,17.799018581487058],
  [120,14.038359368301329],
  [121,18.658227817264983],
  [122,18.463689935573676],
  [123,22.687619584142652],
  [124,25.088957744790036],
  [125,28.184893996099582],
  [126,28.03276492115397],
  [127,24.11167758305713],
  [128,24.28007484247854],
  [129,28.23487421795626],
  [130,26.246971673504287],
  [131,29.330939820784877],
  [132,26.07749855928238],
  [133,23.921786397788168],
  [134,28.825012181053275],
  [135,25.140449169947626],
  [136,21.79048000172746],
  [137,23.05414699421924],
  [138,20.712904460250886],
  [139,19.727388210287337],
  [140,15.219713454550508],
  [141,16.567062865467058],
  [142,21.46105146001275],
  [143,24.699736621958863],
  [144,20.05510726036824],
  [145,16.200669070105356],
  [146,16.938945414022744],
  [147,15.50411643355061],
  [148,14.788500646665874],
  [149,16.97330575970296]
];

</script>