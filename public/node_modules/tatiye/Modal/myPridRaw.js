import tatiyeNet  from "../es6.js"; 
export function myPridRaw(resheader,title,width,route,inikey,page=1) { 
   let myFrom=`
 <div id="${resheader}" class="modal2" data-headerkey="${resheader}">
          <div class="modal-contentNg">
          <div style="margin:auto;  margin-top:60px; background-color: #fff; width:${width}">
           <div class="setModal shadow-lg">
           <div id="modalHeader${resheader}">
           <div class="
                  setModal-header
                  d-flex
                  align-items-center
                  justify-content-between
                ">
                <h5 id="headerTitel${resheader}"  class="mg-b-0">${title}</h5>
                   <div class="d-flex"> 
                  <a  class="link-03 ml-10px mr-5px"href="javascript:void(0);">
                     <i class="fs-15px ms-Icon ms-Icon--ChromeMinimize"></i>
                  </a>   
                  <a  class="link-03 ml-10px mr-5px"href="javascript:void(0);">
                      <i class="ms-Icon ms-Icon--ChromeRestore" id="welcomeMinimize"></i>
                  </a>
                  <a id="myclose${resheader}" class="link-03 ml-10px mr-5px"href="javascript:void(0);">
                       <i class="ms-Icon ms-Icon--ChromeClose"></i>
                  </a>
                </div>
              </div>
            </div>
            <div id="body${resheader}"class="setModal-body">
                   <form id="form_${resheader}"  method="POST" enctype="multipart/form-data"> 
                    <div class="row row-xs mb-10px">
                          <div class="col-md-12">
                            <label class="checkbox">
                                <input type="checkbox" id="useDefaultPrinter" /> <strong>Print to Default printer</strong>
                            </label>
                          </div>
                          <div class="col-md-12">
                                <div id="installedPrinters">
                                <select class="form-control" name="installedPrinterName" id="installedPrinterName" >
                                    <option value="">Pilih Jenis Prind </option>
                                </select>
                            </div>
                          </div>
                          </div>

                      <div class="row row-xs" id="bodyFrom${resheader}"></div>
                      <pre class="row row-xs" id="raw${resheader}"></pre>  
                      <div class="row row-xs">
                       <div class="col-md-12" style="padding-right:2.4px;">
                           <div class="setModal-footer">
                             <button id="myclose${resheader}" type="button" class="btn btn-xs btn-white mr-10px">Batalkan</button>
                              <button id="sendEntri${resheader}" class="btn btn-xs btn-primary bold" type="button">Simpan</button>
                              <button style="display:none;"id="disabled${resheader}" class="btn btn-xs btn-primary bold" type="button"><i class="ti-lock"></i> Privacy</button>
                              <button style="display:none;" id="endEntri${resheader}" class="mr-3px btn btn-xs btn-primary" type="button" disabled="">
                               <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Loading...
                             </button>
                           </div>
                        </div> 
                     </div>
                 </form>
            </div>
          </div>
          </div>
        </div>   
        </div>`;


   JSPM.JSPrintManager.auto_reconnect = true;
    JSPM.JSPrintManager.start();
    JSPM.JSPrintManager.WS.onStatusChanged = function () {
        if (jspmWSStatus()) {
            //get client installed printers
            JSPM.JSPrintManager.getPrinters().then(function (myPrinters) {
                var options = '';
                for (var i = 0; i < myPrinters.length; i++) {
                    options += '<option>' + myPrinters[i] + '</option>';
                }
                $('#installedPrinterName').html(options);
            });
        }
    };
const jspmWSStatus=function () {
    //Check JSPM WebSocket status
    
        if (JSPM.JSPrintManager.websocket_status == JSPM.WSStatus.Open)
            return true;
        else if (JSPM.JSPrintManager.websocket_status == JSPM.WSStatus.Closed) {
            //alert('JSPrintManager (JSPM) is not installed or not running! Download JSPM Client App from https://neodynamic.com/downloads/jspm');
            return false;
        }
        else if (JSPM.JSPrintManager.websocket_status == JSPM.WSStatus.Blocked) {
            //alert('JSPM has blocked this website!');
            return false;
        }
    }
 window.printraw=function () {
    //Do printing...
  
        if (jspmWSStatus()) {
            //Create a ClientPrintJob
            var cpj = new JSPM.ClientPrintJob();
            //Set Printer type (Refer to the help, there many of them!)
            if ($('#useDefaultPrinter').prop('checked')) {
                cpj.clientPrinter = new JSPM.DefaultPrinter();
            } else {
                cpj.clientPrinter = new JSPM.InstalledPrinter($('#installedPrinterName').val());
            }
           var cmds = $("#raw"+resheader).text();
            cpj.printerCommands =cmds;
            cpj.sendToClient();
        }
        
    }


return myFrom;
};

