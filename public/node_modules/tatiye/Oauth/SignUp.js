import tatiyeNet  from "../es6.js";  
const setSignIn = function() {
       var desain=`
         <button  class="btn btn-brand-02 btn-block"disabled>
              <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
              Loading...
         </button>
        `;

       const info = document.getElementById("oauthAccountInfo");
        var oauth_uid=$('input[name=oauth_uid]').val();
        var oauth_pws=$('input[name=oauth_pws]').val();
        var oauth_name=$('input[name=oauth_name]').val();
        var oauth_confirmasi=$('input[name=oauth_confirmasi]').val();
var myHeaders = new Headers();
myHeaders.append("Authorization", tatiyeNet.token);
myHeaders.append("Content-Type", "application/json");
myHeaders.append("Cookie", "PHPSESSID=1b15sq9hm3ct7ohk2u1mdkgnc1");

var raw = JSON.stringify({
  "fullname":   oauth_name,
  "username":   oauth_uid,
  "password":   oauth_pws,
  "confirmasi": oauth_confirmasi

});

var requestOptions = {
  method: 'POST',
  headers: myHeaders,
  body: raw,
  redirect: 'follow'
};

fetch(tatiyeNet.api+"/registrasi", requestOptions)
  .then(response => response.json())
  .then(result =>{
    if (result.messages[0] !=='success') {
    info.innerHTML=`  
        <div class="mg-t-20 alert alert-danger d-flex align-items-center" role="alert">
                <i data-feather="alert-circle" class="mg-r-10"></i>${result.messages[0]}
         </div>
      `;
    } else {
     info.innerHTML=`  
        <div class="mg-t-20 alert alert-success d-flex align-items-center" role="alert">
                <i data-feather="alert-circle" class="mg-r-10"></i>Sukses mendaftar
         </div>
      `;  
       $('input[type="text"],select, textarea').val('');//kosongkan form
       $('input[type="email"],select,form textarea').val('');//kosongkan form
       $('input[type="password"], select, textarea').val('');//kosongkan form
       $('input[type="radio"]').prop('checked', false); 
       $('input[type="checkbox"]').prop('checked', false); 
       $("#success").html(result.data.fullname);
    }
     // $("#oauthAccountInfo").text(result.messages[0]);
     // console.log(result.messages[0])
  })
  .catch(error => console.log('error', error));
};
 const SignIn = document.getElementById('oauthAccount');
 SignIn.addEventListener('click', setSignIn);

