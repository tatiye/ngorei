import tatiyeNet,{modalEntri}  from "../es6.js"; 
export function Assets(row) {
   var appColom=''; 
    window.ClickRefresh=function (key) {
           if (key=='datatables') {
                $(".table").DataTable().ajax.reload( null, false);
           } else if (key=='vue') {
                window.app.storage(); 
           } else {
            
           }
        };
   if (row.body.insert==true) {
        window.ClickAddTables=function (key) {
            modalEntri(key)
        };
        if (row.body.content=='datatables') {
            var add=`
            <a  class="link-03 ml-10px mr-5px"href="javascript:void(0);" onclick="ClickAddTables('${row.body.key}');" id="mysetmodal">
               <i class="fs-15px ms-Icon ms-Icon--Add" id="add"></i>
             </a>`;
        } else if (row.body.content=='vue') {
            var add=`
            <a  class="link-03 ml-10px mr-5px"href="javascript:void(0);" onclick="ClickAddTables('${row.body.key}');" id="mysetmodal">
               <i class="fs-15px ms-Icon ms-Icon--Add" id="add"></i>
             </a>`;

        } else {
        var add=``;
        }
    } else {
       var add='';
    }
   var headerID =row.grid.header.replace(/[^A-Za-z0-9]/g, '');
      $.post(tatiyeNet.autoload,{
                 "package"      :row.package+'/'+row.grid.route,
                  "key"         :'inikey',
                  "resheader"   :headerID,
                 beforeSend: function() {
                      $("#gridBody"+headerID).html(`
                        <div style="width:200px;margin: auto; margin-top: 200px;" class="col-md-12">
                               <div class="spinner-border text-primary " role="status">
                                 <span class="sr-only">Loading...</span>
                               </div>
                       </div>
                      `); 
                 },
                })
               .done(function (data) {
                  $("#gridBody"+headerID).html(data);  

              });
             // const getGrid      =JSON.parse(localStorage.getItem('appGrid'));
               // if (getGrid.setId[key1]) {
               //     var appGridID      =getGrid.setId[key1];
               //     var appGridColom   =getGrid.setClass[key1];
               //     var appGridHeader  =getGrid.setHeader[key1];
               // } else {
                   var appGridID      =headerID;
                   var appGridColom   =row.grid.colom;
                   var appGridHeader  =row.grid.header;
               // }

             var desain=`<div id="${appGridID}" class="${appGridColom}" 
                   data-id="${appGridID}"
                   data-colom="${row.grid.colom}"
                   data-header="${row.grid.header}">
                       <div class="setModal">
                       <div id="modalHeader">
                       <div class="
                              setModal-header
                              d-flex
                              align-items-center
                              justify-content-between">
                              <h5 id="headerGrid"  class="mg-b-0">${appGridHeader}</h5>
                               <div class="d-flex"> 
                                  <a  class="link-03 ml-10px mr-5px"href="javascript:void(0);">
                                     <i class="fs-15px ms-Icon ms-Icon--ChromeMinimize"></i>
                                  </a>   
                                  <a  onclick="ClickRefresh('${row.body.content}');"class="link-03 ml-10px mr-5px"href="javascript:void(0);">
                                      <i class="fs-15px ms-Icon ms-Icon--Rotate90CounterClockwise"></i>
                                  </a>
                                  ${add}
                                  
                            </div>
                          </div>
                        </div>
                        
                        <div id="gridBody${appGridID}"class="setModal-body"></div>
                      </div>
                      </div>`;
                        appColom +=desain; 
// });
  var template=`
<div class="${row.grid.classRow} pd-t-10">
    <div class="row  row-xs"id="grid">
    ${appColom}
    </div>
</div>
`;
$("#"+row.autoload).html(template);
$("#grid").sortable({
        handle: "#headerGrid",
         cursor: 'move', 
       //   update: function() {
             
       // }                                 
   });
};
