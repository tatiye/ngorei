import tatiyeNet,{
modalEntri,
mainRouterId,
modalRouteFrom,
useHandel,
useTabPages,
readmore,
components
}  from "../es6.js"; 
import '../pagination.min.js';
export function setElement(set) {
    // console.log(set)
           const assets = new components();
     let setID=set['element'];
     var useElement=set['useElement'];

   // console.log(dabatabse.total_peging)
  

      const useDomStorageGrid=function (limit=set['db']['key'],page=set['db']['page'],setkeywords='') {
    // console.log(setID)
       let dabatabse=useHandel({
           "token"    :set['db']['token'],
           "storage"       :{
              "limit":limit,
              "page":page,
              "keywords":setkeywords
           }
        });
     var myTemplate='';
     $(setID).hide();
 
     $(useElement).attr('class','card-body')
     dabatabse.storage.forEach(row => {
            $(setID+" a").each(function( index ) {
                  $(this).attr('id',row.id)
                  $(this).attr('row') 
                  $(this).attr("href", 'javascript:void(0);');
                  $(this).removeAttr('app')
             });        
             $(setID+" h1").each(function( index ) {
                 if ($(this).attr('row')) {
                  $(this).attr('id',$(this).attr('row')+index+row.no)
                 }
             });

             $(setID+" h2").each(function( index ) {
                 if ($(this).attr('row')) {
                  $(this).attr('id',$(this).attr('row')+index+row.no)
                 }
             });
             $(setID+" h3").each(function( index ) {
                 if ($(this).attr('row')) {
                  $(this).attr('id',$(this).attr('row')+index+row.no)
                 }
             });
             $(setID+" h4").each(function( index ) {
                 if ($(this).attr('row')) {
                  $(this).attr('id',$(this).attr('row')+index+row.no)
                 }
             });
             $(setID+" h5").each(function( index ) {
                 if ($(this).attr('row')) {
                  $(this).attr('id',$(this).attr('row')+index+row.no)
                 }
             });
             $(setID+" h6").each(function( index ) {
                 if ($(this).attr('row')) {
                  $(this).attr('id',$(this).attr('row')+index+row.no)
                 }
             });        
             $(setID+" div").each(function( index ) {
                 if ($(this).attr('row')) {
                  $(this).attr('id',$(this).attr('row')+index+row.no)
                 }
             }); 
             $(setID+" p").each(function( index ) {
                 if ($(this).attr('row')) {
                  $(this).attr('id',$(this).attr('row')+index+row.no)
                 }
             });    
             $(setID+" li").each(function( index ) {
                 if ($(this).attr('row')) {
                  $(this).attr('id',$(this).attr('row')+index+row.no)
                 }
             }); 

            $(setID+" dt").each(function( index ) {
                 if ($(this).attr('row')) {
                  $(this).attr('id',$(this).attr('row')+index+row.no)
                 }
             }); 
            $(setID+" dd").each(function( index ) {
                 if ($(this).attr('row')) {
                  $(this).attr('id',$(this).attr('row')+index+row.no)
                 }
             }); 
            $(setID+" b").each(function( index ) {
                 if ($(this).attr('row')) {
                  $(this).attr('id',$(this).attr('row')+index+row.no)
                 }
             }); 

            $(setID+" strong").each(function( index ) {
                 if ($(this).attr('row')) {
                  $(this).attr('id',$(this).attr('row')+index+row.no)
                 }
             }); 
            $(setID+" small").each(function( index ) {
                 if ($(this).attr('row')) {
                  $(this).attr('id',$(this).attr('row')+index+row.no)
                 }
             }); 
            $(setID+" class").each(function( index ) {
                 if ($(this).attr('row')) {
                  $(this).attr('id',$(this).attr('row')+index+row.no)
                 }
             });          

              $(setID+" img").each(function( index ) {
                    if ($(this).attr('row')) {
                     $(this).attr('id',$(this).attr('row')+index+row.no)
                    }
                });


              $(setID+" span").each(function( index ) {
                    if ($(this).attr('row')) {
                     $(this).attr('id',$(this).attr('row')+index+row.no)
                    }
                });

                $(setID+" dropdown").each(function(index) {
                    if ($(this).attr('row')) {
                        $(this).attr('id',$(this).attr('row')+index+row.no)
                    }
                });

        myTemplate +=$(setID).html();
      });
     const getAtr = document.querySelector('#gridSystem'); 
    // console.log(getAtr)
     $(useElement).html(myTemplate)
          dabatabse.storage.forEach(set => {

              $(setID+"  dropdown").each(function( index ) {
                   if ($(this).attr('row')) {
             
                      console.log($(this).attr('row'))
                   }
                });

               $(setID+"  img").each(function( index ) {
                   if ($(this).attr('row')) {
                      var myId=$(this).attr('row')+index+set.no;
                      var myIdname=$(this).attr('row');
                      $(useElement +" #"+myId).attr("src", set[myIdname]);
                      
                   }
                });

                 $(setID+"  h1").each(function( index ) {
                   if ($(this).attr('row')) {
                      var myId=$(this).attr('row')+index+set.no;
                      var myIdname=$(this).attr('row');
                      var myText=$(useElement +" #"+myId).html();
                      if ($(this).attr('textRight')) {
                         var textRight=$(this).attr('textRight');
                      } else {
                          var textRight='';
                      }
                      if ($(this).attr('textClass')) {
                         var textValue='<tx class="'+$(this).attr('textClass')+'">'+set[myIdname]+'</tx>';
                      } else {
                          var textValue=set[myIdname];
                      }  if ($(this).attr('textMore')) {
                        // console.log((this).attr('textMore'))
                         var textValue=readmore(set[myIdname],$(this).attr('textMore'));
                      } else {
                          var textValue=set[myIdname];
                      }
                      $(useElement +" #"+myId).html(myText+' '+textValue+' '+textRight);
                   }
                });
                $(setID+"  h2").each(function( index ) {
                   if ($(this).attr('row')) {
                      var myId=$(this).attr('row')+index+set.no;
                      var myIdname=$(this).attr('row');
                      var myText=$(useElement +" #"+myId).html();
                      if ($(this).attr('textRight')) {
                         var textRight=$(this).attr('textRight');
                      } else {
                          var textRight='';
                      }
                      if ($(this).attr('textClass')) {
                         var textValue='<tx class="'+$(this).attr('textClass')+'">'+set[myIdname]+'</tx>';
                      } else {
                          var textValue=set[myIdname];
                      }  if ($(this).attr('textMore')) {
                         var textValue=readmore(set[myIdname],$(this).attr('textMore'));
                      } else {
                          var textValue=set[myIdname];
                      }
                      $(useElement +" #"+myId).html(myText+' '+textValue+' '+textRight);
                   }
                });
                 $(setID+"  h3").each(function( index ) {
                   if ($(this).attr('row')) {
                      var myId=$(this).attr('row')+index+set.no;
                      var myIdname=$(this).attr('row');
                      var myText=$(useElement +" #"+myId).html();
                      if ($(this).attr('textRight')) {
                         var textRight=$(this).attr('textRight');
                      } else {
                          var textRight='';
                      }
                      if ($(this).attr('textClass')) {
                         var textValue='<tx class="'+$(this).attr('textClass')+'">'+set[myIdname]+'</tx>';
                      } else {
                          var textValue=set[myIdname];
                      }  if ($(this).attr('textMore')) {
                         var textValue=readmore(set[myIdname],$(this).attr('textMore'));
                      } else {
                          var textValue=set[myIdname];
                      }
                      $(useElement +" #"+myId).html(myText+' '+textValue+' '+textRight);
                   }
                });
                $(setID+"  h4").each(function( index ) {
                   if ($(this).attr('row')) {
                      var myId=$(this).attr('row')+index+set.no;
                      var myIdname=$(this).attr('row');
                      var myText=$(useElement +" #"+myId).html();
                      if ($(this).attr('textRight')) {
                         var textRight=$(this).attr('textRight');
                      } else {
                          var textRight='';
                      }
                      if ($(this).attr('textClass')) {
                         var textValue='<tx class="'+$(this).attr('textClass')+'">'+set[myIdname]+'</tx>';
                      } else {
                          var textValue=set[myIdname];
                      }  if ($(this).attr('textMore')) {
                         var textValue=readmore(set[myIdname],$(this).attr('textMore'));
                      } else {
                          var textValue=set[myIdname];
                      }
                      $(useElement +" #"+myId).html(myText+' '+textValue+' '+textRight);
                   }
                });
                    $(setID+"  h5").each(function( index ) {
                   if ($(this).attr('row')) {
                      var myId=$(this).attr('row')+index+set.no;
                      var myIdname=$(this).attr('row');
                      var myText=$(useElement +" #"+myId).html();
                      if ($(this).attr('textRight')) {
                         var textRight=$(this).attr('textRight');
                      } else {
                          var textRight='';
                      }
                      if ($(this).attr('textClass')) {
                         var textValue='<tx class="'+$(this).attr('textClass')+'">'+set[myIdname]+'</tx>';
                      } else {
                          var textValue=set[myIdname];
                      }  if ($(this).attr('textMore')) {
                         var textValue=readmore(set[myIdname],$(this).attr('textMore'));
                      } else {
                          var textValue=set[myIdname];
                      }
                      $(useElement +" #"+myId).html(myText+' '+textValue+' '+textRight);
                   }
                });
                $(setID+"  h6").each(function( index ) {
                   if ($(this).attr('row')) {
                      var myId=$(this).attr('row')+index+set.no;
                      var myIdname=$(this).attr('row');
                      var myText=$(useElement +" #"+myId).html();
                      if ($(this).attr('textRight')) {
                         var textRight=$(this).attr('textRight');
                      } else {
                          var textRight='';
                      }
                      if ($(this).attr('textClass')) {
                         var textValue='<tx class="'+$(this).attr('textClass')+'">'+set[myIdname]+'</tx>';
                      } else {
                          var textValue=set[myIdname];
                      }  if ($(this).attr('textMore')) {
                         var textValue=readmore(set[myIdname],$(this).attr('textMore'));
                      } else {
                          var textValue=set[myIdname];
                      }
                      $(useElement +" #"+myId).html(myText+' '+textValue+' '+textRight);
                   }
                });
                 $(setID+"  span").each(function( index ) {
                   if ($(this).attr('row')) {
                      var myId=$(this).attr('row')+index+set.no;
                      var myIdname=$(this).attr('row');
                      var myText=$(useElement +" #"+myId).html();
                      if ($(this).attr('textRight')) {
                         var textRight=$(this).attr('textRight');
                      } else {
                          var textRight='';
                      }
                      if ($(this).attr('textClass')) {
                         var textValue='<tx class="'+$(this).attr('textClass')+'">'+set[myIdname]+'</tx>';
                      } else {
                          var textValue=set[myIdname];
                          
                      } if ($(this).attr('textMore')) {
                         var textValue=readmore(set[myIdname],$(this).attr('textMore'));
                      } else {
                          var textValue=set[myIdname];
                      }

                      $(useElement +" #"+myId).html(myText+' '+textValue+' '+textRight);
                      // $(this).removeAttr('name')

                   }
                });

                 $(setID+"  p").each(function( index ) {
                   if ($(this).attr('row')) {
                      var myId=$(this).attr('row')+index+set.no;
                      var myIdname=$(this).attr('row');
                      var myText=$(useElement +" #"+myId).html();
                      if ($(this).attr('textRight')) {
                         var textRight=$(this).attr('textRight');
                      } else {
                          var textRight='';
                      }
                      if ($(this).attr('textClass')) {
                         var textValue='<tx class="'+$(this).attr('textClass')+'">'+set[myIdname]+'</tx>';
                      } else {
                          var textValue=set[myIdname];
                      }  
                      if ($(this).attr('textMore')) {
                         var textValue=readmore(set[myIdname],$(this).attr('textMore'));
                      } else {
                          var textValue=set[myIdname];
                      }
                      $(useElement +" #"+myId).html(myText+' '+textValue+' '+textRight);
                   }
                });
                 $(setID+" div").each(function( index ) {
                   if ($(this).attr('row')) {
                      var myId=$(this).attr('row')+index+set.no;
                      var myIdname=$(this).attr('row');
                      var myText=$(useElement +" #"+myId).html();
                      if ($(this).attr('textRight')) {
                         var textRight=$(this).attr('textRight');
                      } else {
                          var textRight='';
                      }
                      if ($(this).attr('textClass')) {
                         var textValue='<tx class="'+$(this).attr('textClass')+'">'+set[myIdname]+'</tx>';
                      } else {
                          var textValue=set[myIdname];
                      }  if ($(this).attr('textMore')) {
                         var textValue=readmore(set[myIdname],$(this).attr('textMore'));
                      } else {
                          var textValue=set[myIdname];
                      }
                      $(useElement +" #"+myId).html(myText+' '+textValue+' '+textRight);
                   }
                }); 

                 $(setID+"  li").each(function( index ) {
                   if ($(this).attr('row')) {
                      if ($(this).attr('row') !=='id') {
                      var myId=$(this).attr('row')+index+set.no;
                      var myIdname=$(this).attr('row');
                      var myText=$(useElement +" #"+myId).html();
                      if ($(this).attr('textRight')) {
                         var textRight=$(this).attr('textRight');
                      } else {
                          var textRight='';
                      }
                      if ($(this).attr('textClass')) {
                         var textValue='<tx class="'+$(this).attr('textClass')+'">'+set[myIdname]+'</tx>';
                      } else {
                          var textValue=set[myIdname];
                      }  if ($(this).attr('textMore')) {
                         var textValue=readmore(set[myIdname],$(this).attr('textMore'));
                      } else {
                          var textValue=set[myIdname];
                      }
                      $(useElement +" #"+myId).html(myText+' '+textValue+' '+textRight);

                      }
                   }
                }); 
          
                $(setID+"  dt").each(function( index ) {
                   if ($(this).attr('row')) {
                      var myId=$(this).attr('row')+index+set.no;
                      var myIdname=$(this).attr('row');
                      var myText=$(useElement +" #"+myId).html();
                      if ($(this).attr('textRight')) {
                         var textRight=$(this).attr('textRight');
                      } else {
                          var textRight='';
                      }
                      if ($(this).attr('textClass')) {
                         var textValue='<tx class="'+$(this).attr('textClass')+'">'+set[myIdname]+'</tx>';
                      } else {
                          var textValue=set[myIdname];
                      } if ($(this).attr('textMore')) {
                         var textValue=readmore(set[myIdname],$(this).attr('textMore'));
                      } else {
                          var textValue=set[myIdname];
                      } 
                      $(useElement +" #"+myId).html(myText+' '+textValue+' '+textRight);
                   }
                });
                    $(setID+"  dd").each(function( index ) {
                   if ($(this).attr('row')) {
                      var myId=$(this).attr('row')+index+set.no;
                      var myIdname=$(this).attr('row');
                      var myText=$(useElement +" #"+myId).html();
                      if ($(this).attr('textRight')) {
                         var textRight=$(this).attr('textRight');
                      } else {
                          var textRight='';
                      }
                      if ($(this).attr('textClass')) {
                         var textValue='<tx class="'+$(this).attr('textClass')+'">'+set[myIdname]+'</tx>';
                      } else {
                          var textValue=set[myIdname];
                      } if ($(this).attr('textMore')) {
                         var textValue=readmore(set[myIdname],$(this).attr('textMore'));
                      } else {
                          var textValue=set[myIdname];
                      } 
                      $(useElement +" #"+myId).html(myText+' '+textValue+' '+textRight);
                   }
                });
                $(setID+"  b").each(function( index ) {
                   if ($(this).attr('row')) {
                      var myId=$(this).attr('row')+index+set.no;
                      var myIdname=$(this).attr('row');
                      var myText=$(useElement +" #"+myId).html();
                      if ($(this).attr('textRight')) {
                         var textRight=$(this).attr('textRight');
                      } else {
                          var textRight='';
                      }
                      if ($(this).attr('textClass')) {
                         var textValue='<tx class="'+$(this).attr('textClass')+'">'+set[myIdname]+'</tx>';
                      } else {
                          var textValue=set[myIdname];
                      } if ($(this).attr('textMore')) {
                         var textValue=readmore(set[myIdname],$(this).attr('textMore'));
                      } else {
                          var textValue=set[myIdname];
                      } 
                      $(useElement +" #"+myId).html(myText+' '+textValue+' '+textRight);
                   }
                });
                 $(setID+"  strong").each(function( index ) {
                   if ($(this).attr('row')) {
                      var myId=$(this).attr('row')+index+set.no;
                      var myIdname=$(this).attr('row');
                      var myText=$(useElement +" #"+myId).html();
                      if ($(this).attr('textRight')) {
                         var textRight=$(this).attr('textRight');
                      } else {
                          var textRight='';
                      }
                      if ($(this).attr('textClass')) {
                         var textValue='<tx class="'+$(this).attr('textClass')+'">'+set[myIdname]+'</tx>';
                      } else {
                          var textValue=set[myIdname];
                      } if ($(this).attr('textMore')) {
                         var textValue=readmore(set[myIdname],$(this).attr('textMore'));
                      } else {
                          var textValue=set[myIdname];
                      } 
                      $(useElement +" #"+myId).html(myText+' '+textValue+' '+textRight);
                   }
                });

                 $(setID+"  small").each(function( index ) {
                   if ($(this).attr('row')) {
                      var myId=$(this).attr('row')+index+set.no;
                      var myIdname=$(this).attr('row');
                      var myText=$(useElement +" #"+myId).html();
                      if ($(this).attr('textRight')) {
                         var textRight=$(this).attr('textRight');
                      } else {
                          var textRight='';
                      }
                      if ($(this).attr('textClass')) {
                         var textValue='<tx class="'+$(this).attr('textClass')+'">'+set[myIdname]+'</tx>';
                      } else {
                          var textValue=set[myIdname];
                      } if ($(this).attr('textMore')) {
                         var textValue=readmore(set[myIdname],$(this).attr('textMore'));
                      } else {
                          var textValue=set[myIdname];
                      } 
                      $(useElement +" #"+myId).html(myText+' '+textValue+' '+textRight);
                   }
                });
                 $(setID+"  class").each(function( index ) {
                   if ($(this).attr('row')) {
                      var myId=$(this).attr('row')+index+set.no;
                      var myIdname=$(this).attr('row');
                      var myText=$(useElement +" #"+myId).html();
                      if ($(this).attr('textRight')) {
                         var textRight=$(this).attr('textRight');
                      } else {
                          var textRight='';
                      }
                      if ($(this).attr('textClass')) {
                         var textValue='<tx class="'+$(this).attr('textClass')+'">'+set[myIdname]+'</tx>';
                      } else {
                          var textValue=set[myIdname];
                      }  
                      $(useElement +" #"+myId).html(myText+' '+textValue+' '+textRight);
                   }
                }); 

       
             
      });
     }
     if (set.db.pagination =='off') {
          useDomStorageGrid();
    } 
    // Reload
    window.reload=function (add) {
        if (add=='add') {
             var itemPage=1;
        } else {
             var itemPage=Cookies.get("pageItem");
        }
        useDomStorageGrid(set['db']['key'],itemPage)
    };


   if (set.db.keywords !=='off') {
       assets.from({
              "autoload"   :"appkeywords", //active ,default
              "storage"    :[false, false,false],
              "action"     :{
                 "nama"       :["search","12","Nama file"],
             },
        });
       window.useKeywordsStorage=function(data) {
           useDomStorageGrid(set['db']['key'],set['db']['page'],data)
       }
      $("keywords-"+set['id']).html('<div id="appkeywords" class="row"></div>');
      $("keywords-"+set['id']).attr('class','card-header ')
     }


     if (set.db.pagination !=='off') {
         let dbs=useHandel({
           "token"    :set['db']['token'],
           "storage"       :{
              "limit":set['db']['key'],
              "page":set['db']['page'],
              "keywords":''
           }
       });
      $("footer-"+set['id']).attr('class','card-footer pagination-'+set.db.pagination)
      $("footer-"+set['id']).twbsPagination({
          totalPages:dbs.total_peging,
          visiblePages: 5,
          next: 'Next',
          prev: 'Prev',
          onPageClick: function (event, page) {
             useDomStorageGrid(set['db']['key'],page)
          }
       });
     }



};
